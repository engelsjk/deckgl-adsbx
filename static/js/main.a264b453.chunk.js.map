{"version":3,"sources":["app.js","index.js"],"names":["mapboxgl","workerClass","require","default","DATA_URL","TRIPS","ambientLight","AmbientLight","color","intensity","pointLight","PointLight","position","DEFAULT_THEME","buildingColor","trailColor0","trailColor1","material","ambient","diffuse","shininess","specularColor","effects","LightingEffect","INITIAL_VIEW_STATE","longitude","latitude","zoom","pitch","bearing","maxPitch","norm","val","max","min","App","trips","trailLength","initialViewState","mapStyle","theme","loopLength","animationSpeed","useState","time","setTime","animation","animate","t","id","window","requestAnimationFrame","useEffect","cancelAnimationFrame","layers","TripsLayer","data","getPath","d","path","getTimestamps","timestamps","getColor","map","x","interpolateWarm","match","Number","opacity","widthMinPixels","rounded","currentTime","shadowEnabled","controller","mapboxApiAccessToken","process","preventStyleDiffing","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0SAUAA,IAASC,YAAcC,EAAQ,KAAqDC,QAEpF,IAGMC,EAAW,CACdC,MAAO,CACL,iHACA,mHAICC,EAAe,IAAIC,IAAa,CACpCC,MAAO,CAAC,IAAK,IAAK,KAClBC,UAAW,IAGPC,EAAa,IAAIC,IAAW,CAChCH,MAAO,CAAC,IAAK,IAAK,KAClBC,UAAW,EACXG,SAAU,EAAE,MAAO,KAAM,OAYrBC,EAAgB,CACpBC,cAAe,CAAC,GAAI,GAAI,IACxBC,YAAa,CAAC,IAAK,IAAK,IACxBC,YAAa,CAAC,GAAI,IAAK,KACvBC,SAXe,CACfC,QAAS,GACTC,QAAS,GACTC,UAAW,GACXC,cAAe,CAAC,GAAI,GAAI,KAQxBC,QAAS,CAdY,IAAIC,IAAe,CAACjB,eAAcI,iBAiBnDc,EAAqB,CACzBC,WAAY,kBACZC,SAAU,kBACVC,KAAM,EACNC,MAAO,GACPC,QAAS,EACTC,SAAU,IAMZ,SAASC,EAAKC,EAAKC,EAAKC,GAAO,OAAQF,EAAME,IAAQD,EAAMC,GAuE5CC,MArEf,YAQI,IAAD,IAPDC,aAOC,MAPOhC,EAASC,MAOhB,MANDgC,mBAMC,MANa,IAMb,MALDC,wBAKC,MALkBd,EAKlB,MAJDe,gBAIC,MAZe,kCAYf,MAHDC,aAGC,MAHO3B,EAGP,MAFD4B,kBAEC,MAFY,IAEZ,MADDC,sBACC,MADgB,GAChB,IAEuBC,mBAAS,GAFhC,mBAEMC,EAFN,KAEYC,EAFZ,OAGmBF,mBAAS,IAAtBG,EAHN,oBAKKC,EAAU,SAAVA,IACJF,GAAQ,SAAAG,GAAC,OAAKA,EAAIN,GAAkBD,KACpCK,EAAUG,GAAKC,OAAOC,sBAAsBJ,IAG9CK,qBACE,WAEE,OADAN,EAAUG,GAAKC,OAAOC,sBAAsBJ,GACrC,kBAAMG,OAAOG,qBAAqBP,EAAUG,OAErD,CAACH,IAGH,IAAMQ,EAAS,CACb,IAAIC,IAAW,CACbN,GAAI,SACJO,KAAMpB,EAAM,GACZqB,QAAS,SAAAC,GAAC,OAAIA,EAAEC,MAChBC,cAAe,SAAAF,GAAC,OAAIA,EAAEG,YAEtBC,SAAU,SAAAJ,GAAC,OAAIA,EAAEC,KAAKI,KAAI,SAAAC,GAAC,OAAIC,YAAgB,EAAElC,EAAKiC,EAAE,GAAG,IAAM,IAAIE,MAAM,QAAQH,IAAII,YACvFC,QAAS,GACTC,eAAgB,EAChBC,SAAS,EACTjC,cACAkC,YAAa3B,EACb4B,eAAe,IAEjB,IAAIjB,IAAW,CACbN,GAAI,SACJO,KAAMpB,EAAM,GACZqB,QAAS,SAAAC,GAAC,OAAIA,EAAEC,MAChBC,cAAe,SAAAF,GAAC,OAAIA,EAAEG,WAAWE,KAAI,SAASC,GAAK,OAAOA,EAAI,YAE9DF,SAAU,SAAAJ,GAAC,OAAIA,EAAEC,KAAKI,KAAI,SAAAC,GAAC,OAAIC,YAAgB,EAAElC,EAAKiC,EAAE,GAAG,IAAM,IAAIE,MAAM,QAAQH,IAAII,YACvFC,QAAS,GACTC,eAAgB,EAChBC,SAAS,EACTjC,cACAkC,YAAa3B,EACb4B,eAAe,KAInB,OACE,cAAC,IAAD,CACElB,OAAQA,EACRhC,QAASkB,EAAMlB,QACfgB,iBAAkBA,EAClBmC,YAAY,EAJd,SAME,cAAC,IAAD,CAAYC,qBApHUC,6FAoHiC7C,SAAU,GAAIS,SAAUA,EAAUqC,qBAAqB,OC5HpHC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.a264b453.chunk.js","sourcesContent":["/* global window */\nimport React, {useState, useEffect} from 'react';\nimport ReactMapGL from 'react-map-gl';\nimport mapboxgl from \"mapbox-gl\";\nimport DeckGL from '@deck.gl/react';\nimport {AmbientLight, PointLight, LightingEffect} from '@deck.gl/core';\nimport {TripsLayer} from '@deck.gl/geo-layers';\nimport {interpolateWarm} from 'd3-scale-chromatic';\n\n// eslint-disable-next-line import/no-webpack-loader-syntax\nmapboxgl.workerClass = require('worker-loader!mapbox-gl/dist/mapbox-gl-csp-worker').default;\n\nconst MAPBOX_ACCESS_TOKEN = process.env.REACT_APP_MAPBOX_ACCESS_TOKEN;\n\n// Source data CSV\nconst DATA_URL = {\n   TRIPS: [\n     'https://raw.githubusercontent.com/engelsjk/adsbxutils/main/flightpathdata/deckgl/trace_full_ab1fbb_deckgl.json', // eslint-disable-line\n     'https://raw.githubusercontent.com/engelsjk/adsbxutils/main/flightpathdata/deckgl/trace_full_abca00_deckgl.json', // eslint-disable-line\n   ]\n};\n\nconst ambientLight = new AmbientLight({\n  color: [255, 255, 255],\n  intensity: 1.0\n});\n\nconst pointLight = new PointLight({\n  color: [255, 255, 255],\n  intensity: 2.0,\n  position: [-74.05, 40.7, 8000]\n});\n\nconst lightingEffect = new LightingEffect({ambientLight, pointLight});\n\nconst material = {\n  ambient: 0.1,\n  diffuse: 0.6,\n  shininess: 32,\n  specularColor: [60, 64, 70]\n};\n\nconst DEFAULT_THEME = {\n  buildingColor: [74, 80, 87],\n  trailColor0: [253, 128, 93],\n  trailColor1: [23, 184, 190],\n  material,\n  effects: [lightingEffect]\n};\n\nconst INITIAL_VIEW_STATE = {\n  longitude: -91.36156905126727,\n  latitude: 29.97256762427715, \n  zoom: 6,\n  pitch: 45,\n  bearing: 0,\n  maxPitch: 60\n};\n\n// const MAP_STYLE = 'https://basemaps.cartocdn.com/gl/dark-matter-nolabels-gl-style/style.json';\nconst MAP_STYLE = \"mapbox://styles/mapbox/dark-v10\"\n\nfunction norm(val, max, min) { return (val - min) / (max - min); }\n\nfunction App({\n  trips = DATA_URL.TRIPS,\n  trailLength = 1000,\n  initialViewState = INITIAL_VIEW_STATE,\n  mapStyle = MAP_STYLE,\n  theme = DEFAULT_THEME,\n  loopLength = 100000, // unit corresponds to the timestamp in source data\n  animationSpeed = 50\n}) {\n\n  const [time, setTime] = useState(0);\n  const [animation] = useState({});\n\n  const animate = () => {\n    setTime(t => (t + animationSpeed) % loopLength);\n    animation.id = window.requestAnimationFrame(animate);\n  };\n\n  useEffect(\n    () => {\n      animation.id = window.requestAnimationFrame(animate);\n      return () => window.cancelAnimationFrame(animation.id);\n    },\n    [animation]\n  );\n\n  const layers = [\n    new TripsLayer({\n      id: 'trips0',\n      data: trips[0],\n      getPath: d => d.path,\n      getTimestamps: d => d.timestamps,\n      // getColor: d => (d.name === \"ab1fbb\" ? theme.trailColor0 : theme.trailColor1),\n      getColor: d => d.path.map(x => interpolateWarm(1-norm(x[2],40000,0)).match(/\\d+/g).map(Number)),\n      opacity: 0.3,\n      widthMinPixels: 5,\n      rounded: true,\n      trailLength,\n      currentTime: time,\n      shadowEnabled: false\n    }),\n    new TripsLayer({\n      id: 'trips1',\n      data: trips[1],\n      getPath: d => d.path,\n      getTimestamps: d => d.timestamps.map(function(x) { return x + 4758.87; }), // time delta hack to sync up timestamp arrays\n      // getColor: d => (d.name === \"abca00\" ? theme.trailColor1 : theme.trailColor0),\n      getColor: d => d.path.map(x => interpolateWarm(1-norm(x[2],40000,0)).match(/\\d+/g).map(Number)),\n      opacity: 0.3,\n      widthMinPixels: 5,\n      rounded: true,\n      trailLength,\n      currentTime: time,\n      shadowEnabled: false\n    })\n  ];\n\n  return (\n    <DeckGL\n      layers={layers}\n      effects={theme.effects}\n      initialViewState={initialViewState}\n      controller={true}\n    >\n      <ReactMapGL mapboxApiAccessToken={MAPBOX_ACCESS_TOKEN} maxPitch={60} mapStyle={mapStyle} preventStyleDiffing={true} />\n    </DeckGL>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './app';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}